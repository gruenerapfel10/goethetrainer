# MUA Data Architecture Documentation

## Overview

MUA uses a modular JSON-based architecture for managing university data and academic systems. This document outlines the complete data structure including both the university requirements system (`500.json`) and the new modular academics system for user profiles.

## Data Standardization (Updated January 2025)

**Important**: The university data has been standardized to use consistent key names across all countries while preserving all unique data. This ensures:

- **Consistent API**: All countries use the same field names for similar data
- **Preserved Uniqueness**: Country-specific requirements are maintained in appropriate sections
- **Better UX**: Uniform data structure enables consistent React components
- **Easier Maintenance**: Adding new countries follows established patterns

### Migration Summary

All university data in `500.json` has been migrated from inconsistent schemas to a unified structure:

**Before**: Each country used different key names
- US: `gpa_minimum`, `sat_act`, `high_school_diploma`
- GB: `a_levels`, `gcse`, `ib`
- RU: `diploma`, `unified_state_exam`
- IN: `class_12_percentage`, `required_subjects`

**After**: All countries use standardized keys
- All: `primary_qualification`, `minimum_grade`, `standardized_tests`, `required_subjects`
- Country-specific data preserved in `secondary_qualifications` and `international_curriculum_accepted`

This change improves code maintainability, enables better filtering/search functionality, and provides a more consistent user experience across all nationalities.

## File Structure

The JSON file is an array of university objects, each containing:

### Core University Properties

```json
{
  "name": "string",                    // Full university name
  "country": "string",                 // Country where university is located
  "rank": "number",                    // Global ranking position (1-500)
  "employer_reputation_rank": "number", // Employer reputation ranking
  "academic_reputation_rank": "number", // Academic reputation ranking
  "supported_degrees": ["string[]"]    // Array of degree program IDs
}
```

### Enhanced Country-Specific System

Starting with the top 10 universities, each entry includes country-specific data with both admission requirements and scholarship opportunities:

```json
{
  "us": { 
    "requirements": { /* US nationals requirements */ },
    "scholarship_opportunities": { /* US-specific scholarships */ }
  },
  "gb": { 
    "requirements": { /* UK nationals requirements */ },
    "scholarship_opportunities": { /* UK-specific scholarships */ }
  },
  "ru": { 
    "requirements": { /* Russian nationals requirements */ },
    "scholarship_opportunities": { /* Russia-specific scholarships */ }
  },
  "in": { 
    "requirements": { /* Indian nationals requirements */ },
    "scholarship_opportunities": { /* India-specific scholarships */ }
  }
}
```

## Requirements Schema

### Country Code Mapping
- `us`: United States nationals
- `gb`: United Kingdom (Great Britain) nationals  
- `ru`: Russian Federation nationals
- `in`: Indian nationals

### Country-Specific Structure

Each country object contains both requirements and scholarship opportunities:

```json
{
  "requirements": {
    "academic_requirements": {
      // Academic credentials and test scores
    },
    "language_requirements": {
      // English proficiency requirements
    },
    "application_requirements": {
      // Application process requirements
    },
    "deadlines": {
      // Important application deadlines
    },
    "additional_requirements": [
      // Extra requirements for international students
    ]
  },
  "scholarship_opportunities": {
    "need_based": {
      // Need-based financial aid information
    },
    "merit_based": {
      // Merit-based scholarships
    },
    "research_opportunities": {
      // Paid research programs
    },
    "work_study": {
      // Work-study programs
    },
    "external_scholarships": {
      // Government and private scholarships
    }
  }
}
```

## Detailed Schema Breakdown

### Standardized Academic Requirements

All countries now use a unified schema while preserving unique data:

```json
"academic_requirements": {
  "primary_qualification": "string",    // Main qualification (diploma, certificate, etc.)
  "minimum_grade": "string",           // Minimum grade/score required
  "secondary_qualifications": {
    "gcse": "string",                  // GCSE grades (GB specific)
    "ib_score": "string",              // IB points if applicable
    "ap_courses": "string",            // AP requirements (US specific)
    "unified_state_exam": "string"     // USE scores (RU specific)
  },
  "standardized_tests": {
    "required_tests": ["string"],      // Mandatory standardized tests
    "optional_tests": ["string"],      // Optional standardized tests
    "sat_scores": {
      "minimum": "number",             // Minimum SAT score
      "average": "number",             // Average admitted score
      "range": "string",               // Score range (e.g., "1480-1570")
      "math": "string",                // Math section score range
      "evidence_based_reading": "string" // ERW section score range
    },
    "act_scores": {
      "minimum": "number",             // Minimum ACT score
      "average": "number",             // Average admitted score
      "range": "string"                // Score range
    }
  },
  "required_subjects": ["string"],     // Mandatory subjects
  "international_curriculum_accepted": {
    "ib": "string",                    // IB points accepted (e.g., "42+ points")
    "a_levels": "string",              // A-level grades accepted
    "other": "string"                  // Other international qualifications
  },
  "additional_requirements": "string"   // Any additional requirements
}
```

### Country-Specific Examples

#### US Nationals
```json
"academic_requirements": {
  "primary_qualification": "High School Diploma",
  "minimum_grade": "3.9/4.0 GPA",
  "standardized_tests": {
    "required_tests": ["SAT", "ACT"],
    "sat_scores": {
      "average": 1543,
      "minimum": 1470
    },
    "act_scores": {
      "average": 35
    }
  },
  "secondary_qualifications": {
    "ap_courses": "5+ APs recommended"
  }
}
```

#### UK Nationals
```json
"academic_requirements": {
  "primary_qualification": "A-Levels",
  "minimum_grade": "A*A*A",
  "secondary_qualifications": {
    "gcse": "mostly A*/A grades"
  },
  "international_curriculum_accepted": {
    "ib": "42-45 points"
  },
  "required_subjects": ["Mathematics", "Sciences"]
}
```

#### Russian Nationals
```json
"academic_requirements": {
  "primary_qualification": "Attestat o Srednem Obrazovanii",
  "minimum_grade": "Gold Medal or top 5%",
  "secondary_qualifications": {
    "unified_state_exam": "top 5% scores"
  },
  "international_curriculum_accepted": {
    "ib": "42+ points",
    "a_levels": "A*A*A"
  }
}
```

#### Indian Nationals
```json
"academic_requirements": {
  "primary_qualification": "Class 12 Certificate",
  "minimum_grade": "95%+ (CBSE/ISC)",
  "required_subjects": ["Physics", "Chemistry", "Mathematics"],
  "standardized_tests": {
    "required_tests": ["SAT", "ACT"],
    "sat_scores": {
      "average": 1570,
      "math": "790-800",
      "evidence_based_reading": "750-800"
    }
  },
  "international_curriculum_accepted": {
    "ib": "42+ points",
    "a_levels": "A*A*A"
  }
}
```

### Standardized Language Requirements

```json
"language_requirements": {
  "english_proficiency_required": "boolean",  // Whether English proficiency is required
  "exemption_conditions": "string",           // Conditions for exemption
  "accepted_tests": ["string"],               // Accepted English proficiency tests
  "minimum_scores": {
    "toefl_ibt": "number",                    // Minimum TOEFL iBT score
    "ielts_overall": "number",                // Minimum IELTS overall score
    "ielts_component_minimum": "number",      // Minimum component score
    "duolingo": "number",                     // Minimum Duolingo score
    "pte": "number",                          // Minimum PTE score
    "cambridge_english": "string"             // Cambridge English requirements
  },
  "waiver_conditions": "string"               // Conditions for test waiver
}
```

### Standardized Application Requirements

```json
"application_requirements": {
  "application_portal": "string",           // Application platform/portal
  "application_fee": "string",              // Application fee amount
  "essays_required": {
    "personal_statement": "boolean",        // Personal statement required
    "supplemental_essays": ["string"],      // List of supplemental essays
    "word_limits": "object"                 // Word limits for essays
  },
  "recommendations": {
    "academic_references": "number",        // Academic recommendation letters
    "professional_references": "number",    // Professional recommendation letters
    "total_required": "number"              // Total recommendations required
  },
  "interview": {
    "required": "boolean",                  // Whether interview is required
    "type": "string",                       // Type (alumni, video, in-person)
    "additional_info": "string"             // Additional interview information
  },
  "portfolio_required": "boolean",          // Portfolio requirement
  "admission_tests": ["string"],            // Specific admission tests required
  "document_verification": "string",        // Document verification requirements
  "additional_documents": ["string"]        // Additional required documents
}
```

### Standardized Deadlines

```json
"deadlines": {
  "early_action": "string",          // Early action deadline
  "early_decision": "string",        // Early decision deadline
  "regular_decision": "string",      // Regular decision deadline
  "international_deadline": "string", // International student deadline
  "ucas_deadline": "string",         // UCAS application deadline (GB specific)
  "decision_notification": "string", // Decision notification date
  "enrollment_deadline": "string",   // Enrollment confirmation deadline
  "scholarship_deadline": "string"   // Scholarship application deadline
}
```

### Additional Requirements

```json
"additional_requirements": [
  "visa_requirements",               // Student visa needed
  "financial_proof",                 // Financial documentation
  "entrance_exams"                   // Additional entrance exams
]
```

### Standardized Scholarship Opportunities

```json
"scholarship_opportunities": {
  "need_based": {
    "available": "boolean",                // Whether need-based aid is available
    "percentage_receiving_aid": "string",  // Percentage of students receiving aid
    "average_award_amount": "string",      // Average award amount
    "income_threshold_full_aid": "string", // Income threshold for full aid
    "application_required": "boolean",     // Whether separate application needed
    "required_forms": ["string"],          // Required forms (CSS Profile, FAFSA)
    "deadline": "string",                  // Application deadline
    "additional_requirements": ["string"]   // Additional requirements
  },
  "merit_based": {
    "available": "boolean",                // Whether merit scholarships available
    "scholarships": [{                     // Array of specific scholarships
      "name": "string",                    // Scholarship name
      "amount": "string",                  // Award amount
      "criteria": "string",                // Selection criteria
      "deadline": "string",                // Application deadline
      "renewable": "boolean"               // Whether scholarship is renewable
    }],
    "description": "string"                // General description
  },
  "research_opportunities": {
    "undergraduate_research_available": "boolean", // Research opportunities available
    "programs": ["string"],                // Research program names
    "funding_amount": "string",            // Funding amounts available
    "paid_positions_percentage": "string", // Percentage of paid positions
    "application_process": "string"        // How to apply
  },
  "work_study": {
    "available": "boolean",                // Work-study programs available
    "hours_per_week": "string",           // Typical work hours per week
    "hourly_wage_range": "string",        // Hourly wage range
    "job_types": ["string"],              // Types of work-study jobs
    "application_process": "string"        // How to apply
  },
  "external_scholarships": {
    "government_programs": ["string"],     // Government scholarship programs
    "private_foundations": [{              // Private foundation scholarships
      "name": "string",
      "amount": "string", 
      "deadline": "string"
    }],
    "country_specific_programs": "object"  // Country-specific scholarship programs
  },
  "international_student_aid": {
    "available": "boolean",                // Aid available to international students
    "same_as_domestic": "boolean",         // Same aid as domestic students
    "restrictions": "string",              // Any restrictions
    "additional_requirements": ["string"]   // Additional requirements for international students
  }
}
```

## Data Examples with Standardized Schema

### Example 1: MIT (Rank 1) - Updated with Standardized Schema
```json
{
  "name": "Massachusetts Institute of Technology",
  "country": "United States of America",
  "rank": 1,
  "employer_reputation_rank": 2,
  "academic_reputation_rank": 4,
  "supported_degrees": ["aerospace-eng", "ai-ml", "comp-science", ...],
  "us": {
    "requirements": {
      "academic_requirements": {
        "primary_qualification": "High School Diploma",
        "minimum_grade": "3.9/4.0 GPA",
        "standardized_tests": {
          "required_tests": ["SAT", "ACT"],
          "sat_scores": { "average": 1543 },
          "act_scores": { "average": 35 }
        },
        "secondary_qualifications": {
          "ap_courses": "recommended"
        }
      },
      "language_requirements": {
        "english_proficiency_required": false,
        "accepted_tests": [],
        "minimum_scores": {}
      },
      "deadlines": {
        "early_action": "November 30",
        "regular_decision": "December 31"
      }
    },
    "scholarship_opportunities": {
      "need_based": {
        "available": true,
        "percentage_receiving_aid": "58%",
        "average_award_amount": "$59,000",
        "income_threshold_full_aid": "$90,000 for full aid",
        "application_required": true,
        "required_forms": ["CSS Profile", "FAFSA"]
      },
      "merit_based": {
        "available": false,
        "description": "MIT does not offer merit-based scholarships"
      },
      "research_opportunities": {
        "undergraduate_research_available": true,
        "programs": ["UROP program"],
        "funding_amount": "$1,500-$4,500 per semester"
      },
      "work_study": {
        "available": true,
        "hours_per_week": "8-12 hours per week",
        "hourly_wage_range": "$15-$20"
      }
    }
  }
}
```

### Example 2: Oxford (Rank 4)
```json
{
  "name": "University of Oxford",
  "country": "United Kingdom",
  "rank": 4,
  "gb": {
    "requirements": {
      "academic_requirements": {
        "a_levels": "AAA to A*A*A",
        "gcse": "mostly A*/A grades",
        "ib": "38-42 points"
      },
      "application_requirements": {
        "interview": "required for most courses",
        "admissions_test": "required for most courses"
      },
      "deadlines": {
        "ucas_deadline": "October 15"
      }
    },
    "scholarship_opportunities": {
      "need_based": {
        "available": true,
        "description": "Oxford Bursary for UK students",
        "average_award": "£3,700",
        "income_threshold": "household income under £42,875"
      },
      "merit_based": {
        "available": true,
        "scholarships": [
          {
            "name": "Reach Oxford Scholarships",
            "amount": "full funding",
            "criteria": "students from low-income countries"
          }
        ]
      }
    }
  },
  "ru": {
    "requirements": {
      "language_requirements": {
        "english_proficiency": "required",
        "tests_required": ["IELTS", "TOEFL"],
        "minimum_scores": {
          "ielts": 7.5,
          "toefl": 110
        }
      }
    },
    "scholarship_opportunities": {
      "merit_based": {
        "available": true,
        "scholarships": [
          {
            "name": "Rhodes Scholarships",
            "amount": "full funding",
            "criteria": "exceptional academic merit and leadership"
          }
        ]
      },
      "external_scholarships": {
        "government_programs": ["Russian Government Scholarships"],
        "private_foundations": ["Hill Foundation", "Chevening Scholarships"]
      }
    }
  }
}
```

## Implementation Status

### Phase 1: Core Data (Complete)
- ✅ All 500 universities with basic information
- ✅ Degree program mappings
- ✅ Ranking data

### Phase 2: Requirements System (Complete)
- ✅ Top 10 universities with full requirements data for US, GB, RU, and IN nationals
  1. MIT (US) - ✅ Complete
  2. Imperial College London (UK) - ✅ Complete  
  3. Stanford University (US) - ✅ Complete
  4. Oxford University (UK) - ✅ Complete
  5. Harvard University (US) - ✅ Complete
  6. Cambridge University (UK) - ✅ Complete
  7. ETH Zurich (Switzerland) - ✅ Complete
  8. NUS (Singapore) - ✅ Complete
  9. UCL (UK) - ✅ Complete
  10. Caltech (US) - ✅ Complete

### Phase 3: Expansion (Planned)
- ⏳ Top 50 universities with requirements
- ⏳ Full dataset completion
- ⏳ Additional country support

## Usage Examples

### Frontend Integration

```typescript
interface University {
  name: string;
  country: string;
  rank: number;
  employer_reputation_rank: number;
  academic_reputation_rank: number;
  supported_degrees?: string[];
  us?: CountryData;
  gb?: CountryData;
  ru?: CountryData;
  in?: CountryData;
}

interface CountryData {
  requirements: CountryRequirements;
  scholarship_opportunities: ScholarshipOpportunities;
}

interface CountryRequirements {
  academic_requirements: AcademicRequirements;
  language_requirements: LanguageRequirements;
  application_requirements: ApplicationRequirements;
  deadlines: Deadlines;
  additional_requirements: string[];
}

interface ScholarshipOpportunities {
  need_based?: {
    available: boolean;
    percentage_receiving?: string;
    average_award?: string;
    income_threshold?: string;
    application_required?: boolean;
    additional_forms?: string[];
  };
  merit_based?: {
    available: boolean;
    scholarships?: Array<{
      name: string;
      amount: string;
      criteria: string;
    }>;
  };
  research_opportunities?: {
    undergraduate_research?: boolean;
    paid_positions?: string;
    funding_available?: string;
  };
  work_study?: {
    available: boolean;
    typical_hours?: string;
    hourly_wage?: string;
  };
  external_scholarships?: {
    government_programs?: string[];
    private_foundations?: string[];
  };
}
```

### Filtering Universities

```javascript
// Filter by rank
const topTen = universities.filter(uni => uni.rank <= 10);

// Filter by country
const ukUniversities = universities.filter(uni => 
  uni.country === "United Kingdom"
);

// Filter by requirements availability
const withRequirements = universities.filter(uni => 
  uni.us || uni.gb || uni.ru || uni.in
);

// Get requirements for specific nationality
const getRussianRequirements = (university) => {
  return university.ru?.requirements;
};

// Get scholarship opportunities for specific nationality
const getRussianScholarships = (university) => {
  return university.ru?.scholarship_opportunities;
};

// Filter universities with merit scholarships
const withMeritScholarships = universities.filter(uni => 
  uni.us?.scholarship_opportunities?.merit_based?.available ||
  uni.gb?.scholarship_opportunities?.merit_based?.available ||
  uni.ru?.scholarship_opportunities?.merit_based?.available ||
  uni.in?.scholarship_opportunities?.merit_based?.available
);

// Get requirements for specific nationality (Indian example)
const getIndianRequirements = (university) => {
  return university.in?.requirements;
};

// Get scholarship opportunities for specific nationality (Indian example)
const getIndianScholarships = (university) => {
  return university.in?.scholarship_opportunities;
};
```

## Data Sources

Requirements data was gathered from official university websites and admission portals:

- **MIT**: mitadmissions.org
- **Imperial**: imperial.ac.uk
- **Stanford**: stanford.edu
- **Oxford**: ox.ac.uk  
- **Harvard**: harvard.edu
- **Cambridge**: cam.ac.uk
- **ETH Zurich**: ethz.ch
- **NUS**: nus.edu.sg
- **UCL**: ucl.ac.uk
- **Caltech**: caltech.edu

## Maintenance

### Data Updates
- Requirements should be updated annually before application cycles
- Test score minimums may change yearly
- Deadlines are typically consistent but should be verified

### Quality Assurance
- All scores and requirements verified against official sources
- Country-specific data validated by education consultants
- Regular audits of degree program mappings

## Future Enhancements

1. **Extended Country Support**
   - Add requirements for more nationalities (EU, Canada, Australia, etc.)
   - Regional requirement variations

2. **Program-Specific Requirements**
   - Different requirements per degree program
   - Prerequisites for specific majors

3. **Dynamic Updates**
   - API integration for real-time requirement updates
   - Automated deadline tracking

4. **Scholarship Information**
   - Financial aid requirements by nationality
   - Merit scholarship criteria

## API Considerations

When implementing API endpoints for this data:

```javascript
// Get university by rank
GET /api/universities/rank/1

// Get requirements for specific nationality
GET /api/universities/1/requirements/ru

// Get scholarship opportunities for specific nationality
GET /api/universities/1/scholarships/ru

// Search universities with requirements
GET /api/universities?hasRequirements=true&country=US

// Search universities with scholarship opportunities
GET /api/universities?hasScholarships=true&country=US

// Get all universities for nationality (requirements + scholarships)
GET /api/universities/country/gb

// Filter by scholarship type
GET /api/universities?scholarship_type=merit_based&country=US
```

## Academic Systems Architecture

### Directory Structure

The academic data is organized in a modular structure under `/public/academics/`:

```
/public/academics/
├── systems/           # Education systems by ID
│   ├── ib.json      # International Baccalaureate
│   ├── igcse.json   # Cambridge IGCSE/A-Levels
│   ├── cn-gaokao.json # Chinese Gaokao
│   ├── kr-csat.json  # Korean CSAT/Suneung
│   ├── br-enem.json  # Brazilian ENEM
│   ├── ru-ege.json   # Russian EGE/ЕГЭ
│   └── [more systems...]
├── conversions/      # Grade conversion matrices
│   └── universal-grade-matrix.json
├── requirements/     # University-specific requirements
│   ├── by-country/
│   └── by-university/
├── tests/           # Standardized test data
└── metadata.json    # Version control and registry
```

### System File Structure

Each education system file follows this schema:

```json
{
  "system_id": "string",           // Unique identifier
  "name": "string",                // Full system name
  "type": "international|national", // System type
  "country": "string",             // Country code (if national)
  "version": "YYYY.MM",            // Version timestamp
  "authority": "string",           // Governing body
  "recognition": "string",         // Where recognized
  "last_updated": "date",          // Last update date
  
  "overview": {
    "description": "string",
    "purpose": "string",
    "candidates_2024": "number",
    "importance": "string"
  },
  
  "grading_scale": {
    // System-specific grading information
  },
  
  "scoring_system": {
    // Scoring methodology and ranges
  },
  
  "university_admission": {
    // How scores translate to admissions
  },
  
  "statistics_2024": {
    // Current year statistics
  }
}
```

### Conversion Matrix

The `universal-grade-matrix.json` provides standardized conversions between systems:

```json
{
  "conversions": {
    "percentage_bands": {
      "exceptional": {
        "range": "95-100%",
        "equivalents": {
          "ib": 7,
          "us_gpa": 4.0,
          "gaokao": "675-750",
          "ege": "90-100",
          // ... other systems
        }
      }
    },
    "direct_conversions": {
      // Specific system-to-system mappings
    }
  }
}
```

### Profile Integration

User profiles dynamically load academic data based on selected education system:

1. **System Selection**: User selects their education system
2. **Data Loading**: System-specific JSON is fetched
3. **Dynamic UI**: Input fields adapt to system requirements
4. **Grade Conversion**: Shows international equivalents
5. **Validation**: System-specific validation rules applied

### Supported Education Systems

#### International Systems
- **IB** - International Baccalaureate (1-7 scale, 45 total points)
- **IGCSE** - Cambridge International (A*-G or 9-1 scales)
- **AP** - Advanced Placement (1-5 scale per exam)

#### National Systems
- **United States** - GPA (4.0/5.0/100 scales)
- **United Kingdom** - A-Levels (A*-E grades)
- **China** - Gaokao (750 point scale)
- **South Korea** - CSAT/Suneung (Stanine 1-9)
- **Brazil** - ENEM (0-1000 scale)
- **Russia** - EGE/ЕГЭ (0-100 per subject)
- **Germany** - Abitur (1.0-6.0 scale)
- **France** - Baccalauréat (0-20 scale)
- **India** - CBSE/ISC (percentage/CGPA)
- **Canada** - Provincial systems (percentage)
- **Australia** - ATAR (0-99.95 scale)

### API Usage Examples

```javascript
// Load specific education system
const loadSystemData = async (systemId) => {
  const response = await fetch(`/academics/systems/${systemId}.json`);
  return response.json();
};

// Get grade conversions
const getConversions = async () => {
  const response = await fetch('/academics/conversions/universal-grade-matrix.json');
  return response.json();
};

// Convert grade between systems
const convertGrade = (score, fromSystem, toSystem) => {
  // Use conversion matrix to map grades
};
```

### Frontend Implementation

```typescript
// Academic Section Component
interface AcademicData {
  educationSystem: string;
  grading: {
    system: string;
    score: string;
    scale: string;
    percentile?: string;
    predictedScore?: string;
  };
  // ... other fields
}

// Dynamic test types based on system
const getTestTypes = (educationSystem: string) => {
  const systemTests = {
    'us': ['SAT', 'ACT', 'AP'],
    'ib': ['IB_PREDICTED', 'IB_FINAL'],
    'cn': ['GAOKAO', 'GAOKAO_MOCK'],
    'ru': ['EGE_RUSSIAN', 'EGE_MATH', 'EGE_SUBJECTS'],
    // ... more mappings
  };
  return systemTests[educationSystem] || [];
};
```

## Benefits of Modular Architecture

### Scalability
- **Independent Updates**: Each system can be updated without affecting others
- **Lazy Loading**: Load only required data
- **Version Control**: Track changes per component
- **Easy Expansion**: Add new systems without modifying core structure

### Maintainability
- **Separation of Concerns**: University data separate from academic systems
- **Clear Organization**: Logical directory structure
- **Standardized Schema**: Consistent data format across systems
- **Documentation**: Each file self-documents its structure

### Performance
- **Reduced Bundle Size**: Load only needed JSON files
- **Caching Strategy**: Cache frequently used systems
- **Parallel Loading**: Fetch multiple resources simultaneously
- **Incremental Updates**: Update only changed components

### Internationalization
- **Multi-Country Support**: Native support for all major education systems
- **Grade Conversion**: Automatic equivalency calculations
- **Localized Content**: System-specific terminology and formats
- **Cultural Context**: Preserves system-specific nuances

## Implementation Roadmap

### Phase 1: Core Systems ✅
- Top international systems (IB, IGCSE)
- Major national systems (US, UK, China, Korea, Brazil, Russia)
- Universal conversion matrix
- Basic metadata structure

### Phase 2: Extended Coverage (In Progress)
- Additional national systems
- Regional variations within countries
- Vocational qualifications
- Language proficiency tests

### Phase 3: Advanced Features (Planned)
- AI-powered grade predictions
- Historical trend analysis
- Automated requirement matching
- Real-time data updates

### Phase 4: API Development (Future)
- RESTful API endpoints
- GraphQL support
- Webhook notifications
- Third-party integrations

## Firebase Infrastructure & Profile System

### Overview

MUA uses Firebase as its primary backend infrastructure for user authentication and profile data persistence. The profile system is completely cloud-based with no local storage or fallback mechanisms.

### Firebase Services Used

#### 1. Firebase Authentication
- **Purpose**: User authentication and session management
- **Implementation**: `/context/firebase-auth-context.tsx`
- **Features**:
  - Email/password authentication
  - Google OAuth integration
  - Password reset functionality
  - Session token management via cookies
  - Real-time auth state synchronization

#### 2. Firebase Firestore
- **Purpose**: NoSQL database for user profile data
- **Implementation**: `/lib/firebase/profile-service.ts`
- **Database**: `projects/muauni/databases/default`
- **Location**: us-central1
- **Collections**:
  - `profiles/{userId}` - User profile documents

### Architecture

```
┌─────────────────────────────────────────────────────┐
│                   Client (React)                      │
├─────────────────────────────────────────────────────┤
│                                                       │
│  ┌──────────────────┐    ┌──────────────────────┐  │
│  │  Profile Page     │───▶│  Profile Service    │  │
│  │  /app/profile     │    │  /lib/firebase/     │  │
│  └──────────────────┘    └──────────────────────┘  │
│           │                        │                 │
│           │                        │                 │
│           ▼                        ▼                 │
│  ┌──────────────────┐    ┌──────────────────────┐  │
│  │  Auth Context    │    │  Firebase Config     │  │
│  │  useAuth()       │    │  /lib/firebase/      │  │
│  └──────────────────┘    └──────────────────────┘  │
│                                                       │
└───────────────────────┬──────────────────────────────┘
                        │
                        ▼
        ┌──────────────────────────────────┐
        │        Firebase Backend           │
        ├──────────────────────────────────┤
        │  ┌────────────┐  ┌────────────┐ │
        │  │Firebase    │  │Firestore   │ │
        │  │Auth        │  │Database    │ │
        │  └────────────┘  └────────────┘ │
        └──────────────────────────────────┘
```

### Configuration

#### Environment Variables
```bash
NEXT_PUBLIC_FIREBASE_API_KEY=
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
NEXT_PUBLIC_FIREBASE_PROJECT_ID=muauni
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=
NEXT_PUBLIC_FIREBASE_APP_ID=
```

#### Firebase Project Setup
- **Project ID**: muauni
- **Billing Plan**: Blaze (Pay-as-you-go) - Required for Firestore
- **Region**: us-central1

### Security Rules

Firestore security rules (`firestore.rules`):
```javascript
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Users can only read/write their own profile
    match /profiles/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

### Profile Data Schema

The profile system stores comprehensive user data in Firestore:

```typescript
interface ProfileData {
  // Personal Information
  firstName?: string;
  lastName?: string;
  preferredName?: string;
  email?: string;
  phone?: string;
  dateOfBirth?: string;
  nationality?: string;
  address?: {
    street: string;
    city: string;
    state: string;
    zipCode: string;
    country: string;
  };
  
  // Academic Information (integrates with /academics/ system)
  currentSchool?: string;
  graduationYear?: number;
  qualifications?: Array<{
    id: string;
    system: string;  // References /academics/systems/{system}.json
    year: string;
    score: string;
    additionalInfo?: string;
  }>;
  
  // Test Scores
  testScores?: Array<{
    type: string;
    score: string;
    date: string;
    percentile?: string;
  }>;
  
  // Activities & Achievements
  activities?: Array<{
    name: string;
    category: string;
    description: string;
    yearsParticipated: string;
    hoursPerWeek: string;
    position: string;
  }>;
  
  achievements?: Array<{
    title: string;
    description: string;
    date: string;
    type: string;
  }>;
  
  // Preferences
  preferences?: {
    notifications: {
      email: boolean;
      sms: boolean;
      deadlineReminders: boolean;
      applicationUpdates: boolean;
    };
    privacy: {
      profileVisibility: string;
      shareDataWithPartners: boolean;
    };
    application: {
      preferredApplicationSeason: string;
      targetCountries: string[];
      budgetRange: string;
    };
  };
  
  // Metadata
  updatedAt?: Timestamp;
  createdAt?: Timestamp;
}
```

### Key Implementation Features

#### 1. No Local Storage
- **No localStorage/sessionStorage**: All data persists in Firestore
- **No caching**: Fresh data fetched on each profile load
- **No fallback values**: Empty forms until Firebase data loads
- **No mock data**: Production-ready cloud-only implementation

#### 2. Real-time Synchronization
- Auth state changes trigger automatic profile updates
- Profile changes immediately persist to Firestore
- Multi-device synchronization via Firebase

#### 3. Academic System Integration
The profile system integrates with the modular academics architecture:
- Dynamic qualification selection based on education system
- Automatic grade conversions using `/academics/conversions/`
- System-specific validation rules from `/academics/systems/`

#### 4. Error Handling
Comprehensive error handling with specific messages:
- Network connectivity issues
- Permission denied errors
- Offline state detection
- Billing/quota exceeded alerts

### Profile Service API

The `ProfileService` class provides methods for profile operations:

```javascript
// Core operations
async getProfile(userId: string): Promise<ProfileData | null>
async saveProfile(userId: string, profileData: ProfileData): Promise<void>
async updateProfileFields(userId: string, fields: Partial<ProfileData>): Promise<void>

// Specialized operations
async saveQualifications(userId: string, qualifications: any[]): Promise<void>
async saveTestScores(userId: string, testScores: any[]): Promise<void>
async saveActivities(userId: string, activities: any[]): Promise<void>
async saveAchievements(userId: string, achievements: any[]): Promise<void>
async savePreferences(userId: string, preferences: any): Promise<void>
```

### Deployment & Operations

#### Initial Setup
1. Enable Firebase Authentication in console
2. Enable Firestore Database
3. Deploy security rules: `firebase deploy --only firestore:rules`
4. Configure environment variables
5. Enable Blaze billing plan for production

#### Monitoring
- Firebase Console for real-time monitoring
- Firestore usage metrics
- Authentication analytics
- Error tracking via console logs

#### Performance Considerations
- Firestore automatically handles scaling
- Regional deployment for low latency
- Optimistic UI updates for better UX
- Lazy loading of profile sections

### Migration Notes

The system previously had remnants of a SQL-based profile system (`/app/api/profile/route.ts`) using Drizzle ORM. This has been completely replaced with Firebase Firestore. The old API route remains but is not used by the current profile implementation.

### Security Best Practices

1. **Authentication Required**: All profile operations require authenticated user
2. **User Isolation**: Users can only access their own profile data
3. **Input Validation**: Client-side validation before Firebase writes
4. **Secure Environment Variables**: Firebase config stored in env vars
5. **HTTPS Only**: All Firebase communication over HTTPS

### Future Enhancements

1. **Profile Completion Tracking**: Calculate completion percentage
2. **Document Upload**: Store transcripts and certificates in Firebase Storage
3. **Profile Templates**: Pre-filled templates for common education systems
4. **Batch Operations**: Bulk import/export of profile data
5. **Audit Logging**: Track all profile modifications
6. **Backup Strategy**: Automated Firestore backups

## Conclusion

The modular architecture provides a robust, scalable foundation for managing university requirements, academic systems, and user profiles. This approach enables:

- **Personalized Experiences**: Tailored to user's education system
- **Accurate Conversions**: Standardized grade equivalencies
- **Global Coverage**: Support for worldwide education systems
- **Cloud-Native Infrastructure**: Firebase-powered real-time data
- **Future-Proof Design**: Easy to extend and maintain

The separation of concerns between university data (`500.json`), academic systems (`/academics/`), and user profiles (Firebase) creates a flexible architecture that can grow with the platform's needs while maintaining performance, security, and usability.